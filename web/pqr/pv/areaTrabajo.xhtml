<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:html5="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition >
        <!-- **********************************************************************************************************************************************************
         MAIN CONTENT
         *********************************************************************************************************************************************************** -->


        <!--main content start-->
        <section id="main-content">
            <section class="wrapper">
                <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">

                    <div class="row">
                        <ol class="breadcrumb">
                            <li><a href="#">
                                    <em class="fa fa-home"></em>
                                </a></li>
                            <li class="active">Fidelización</li>
                        </ol>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h1 class="page-header">Peticiones, quejas y reclamos(P.Q.R)</h1>
                        </div>
                    </div>
                    <div class="container">
                        <div class="panel panel-default articles">
                            <div class="panel-heading">
                                Formulario para P.Q.R
                                <span class="pull-right clickable panel-toggle panel-button-tab-left"><em class="fa fa-toggle-up"></em></span></div>
                            <div class="panel-body articles-container">
                                <div class="article border-bottom">
                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="well well-sm">
                                                    <h:form class="form-horizontal">
                                                        <fieldset>
                                                            <legend class="text-center header">Asegurese de completar todos los campos.</legend>


                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center" for="tipo"><i class="fa fa-info"></i></span>
                                                                <div class="col-md-8">
                                                                    <h:selectOneMenu class="form-control" value="#{pqrRequest.newpqr.tipo}" required="true" id="selecpqr" label="Seleccione campo" >
                                                                        <f:selectItem itemLabel="Seleccione de acuerdo al requerimiento que desea presentar"></f:selectItem>
                                                                        <f:selectItem itemLabel="Petición" itemValue="Petición"></f:selectItem>
                                                                        <f:selectItem itemLabel="Quejas/Reclamos" itemValue="Quejas/Reclamo"></f:selectItem>
                                                                        <f:selectItem itemLabel="Recurso de reposición" itemValue="Recurso de reposición"></f:selectItem>
                                                                        <f:selectItem itemLabel="Recurso de reposición y en subsidio" itemValue="Recurso de reposición y en subsidio de apelación"></f:selectItem>
                                                                    </h:selectOneMenu>
                                                                    <strong><h:message for="selecpqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"  ><i class="fa fa-user bigicon"></i></span>
                                                                <div class="col-md-8">
                                                                    <h:inputText  html5:type="text" html5:placeholder="Nombre"  class="form-control" value="#{pqrRequest.newpqr.nombre}" required="true" id="nombrepqr" label="Dato Incompleto" html5:pattern="[A-Za-z ]+"/>
                                                                    <strong><h:message for="nombrepqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-user bigicon"></i></span>
                                                                <div class="col-md-8">
                                                                    <h:inputText html5:type="text" html5:placeholder="Apellido" class="form-control" value="#{pqrRequest.newpqr.apellido}" required="true" id="apellpqr" label="Dato Incompleto" html5:pattern="[A-Za-z ]+"/>
                                                                    <strong><h:message for="apellpqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>
                                                            <!---->
                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-address-card"></i></span>
                                                                <div class="col-md-3">
                                                                    <h:selectOneMenu class="form-control" value="#{pqrRequest.newpqr.tipoDocumento}" required="true" id="selectddp" label="Seleccione campo" >
                                                                        <f:selectItem itemLabel="Tipo de documento" itemValue="Tipo de documento"></f:selectItem>
                                                                        <f:selectItem itemLabel="Cedula de ciudadania" itemValue="Cedula de ciudadania"></f:selectItem>
                                                                        <f:selectItem itemLabel="Cedula de extranjeria" itemValue="Cedula de extranjeria"></f:selectItem>
                                                                        <f:selectItem itemLabel="Pasaporte" itemValue="Pasaporte"></f:selectItem>
                                                                        <f:selectItem itemLabel="NIT" itemValue="NIT"></f:selectItem>
                                                                    </h:selectOneMenu>
                                                                    <strong><h:message for="selectddp" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-hashtag"></i></span>
                                                                <div class="col-md-3">
                                                                    <h:inputText html5:type="number" html5:placeholder="Número de identificación" class="form-control" value="#{pqrRequest.newpqr.numeroDocumento}" required="true" id="numpqr" label="Dato Obligatorio" html5:pattern="[0-9]+"/>
                                                                    <strong><h:message for="numpqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-envelope-o bigicon"></i></span>
                                                                <div class="col-md-8">
                                                                    <h:inputText html5:type="text" html5:placeholder="Correo Electrónico" class="form-control" value="#{pqrRequest.newpqr.correo}" required="true" id="emailpqr" label="Dato Obligatorio"/>
                                                                    <strong><h:message for="emailpqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-phone-square bigicon"></i></span>
                                                                <div class="col-md-8">
                                                                    <h:inputText html5:type="text" html5:placeholder="Teléfono" class="form-control" value="#{pqrRequest.newpqr.telefono}" required="true" id="telpqr" label="Dato Obligatorio" html5:pattern="[0-9]+"/>
                                                                    <strong><h:message for="telpqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <span class="col-md-1 col-md-offset-2 text-center"><i class="fa fa-pencil-square-o bigicon"></i></span>
                                                                <div class="col-md-8">
                                                                    <h:inputText class="form-control" html5:placeholder="¿Cuáles son los hechos en que fundamenta el requerimiento?" html5:rows="7" value="#{pqrRequest.newpqr.descripcion}" required="true" id="txtpqr" label="Texto Obligatorio" html5:pattern="[A-Za-z0-9 ]+"/>
                                                                    <strong><h:message for="txtpqr" style="color: #e50000;"></h:message></strong>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <div class="col-md-12 text-center">
                                                                    <h:commandButton type="reset" class="btn btn-danger btn-lg" value="Cancelar"/>
                                                                    <h:commandButton type="submit" class="btn btn-success btn-lg" value="Finalizar" action="#{pqrRequest.registrarPqr()}"/>
                                                                </div>
                                                            </div>
                                                        </fieldset>
                                                    </h:form>
                                                    <br></br>

                                                </div>
                                            </div>

                                        </div></div>
                                </div>

                            </div>
                        </div>	
                    </div>
                </div>

                <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
                    <div class="container">
                        <div class="panel panel-default articles">

                            <table class="table table-striped table-advance table-hover ">
                                <h4><i class="fa fa-angle-right"></i>Lista de PQR</h4>
                                <hr/>
                                <thead>
                                    <tr>
                                        <th>Codigo</th>
                                        <th>Usuario</th>
                                        <th>Descripción</th>
                                        <th>Respuesta</th>
                                        <th></th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <h:form id="listasPqr">


                                        <c:forEach items="#{usuarioSesion.usuLogin.pqrCollection}" var="pqr3">

                                            <tr>
                                                <td>#{pqr3.idPqr}</td>
                                                <td>#{pqr3.usuarioIDUsuario.usuario}</td>
                                                <td>#{pqr3.descripcion}</td>
                                                <td>#{pqr3.respuesta}</td>
                                                <td></td>
                                                <td>
                                                    <h:commandButton style="display: none" id="tbl#{pqr3.idPqr}" action="#{pqrRequest.removerPqr(pqr3)}"></h:commandButton>   

                                                    <button type="button" onclick="$('#listasPqr\\:tbl#{pqr3.idPqr}').click()" class="btn btn-danger btn-xs"><i class="fa fa-trash-o "></i></button>

                                                </td>
                                            </tr>

                                        </c:forEach>


                                    </h:form>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </section>
        <!--main content end-->
    </ui:composition>
</html>


